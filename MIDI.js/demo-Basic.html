<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <!-- midi.js package -->
 <script src="./js/MIDI/AudioDetect.js" type="text/javascript"></script>
 <script src="./js/MIDI/LoadPlugin.js" type="text/javascript"></script>
 <script src="./js/MIDI/Plugin.js" type="text/javascript"></script>
 <script src="./js/MIDI/Player.js" type="text/javascript"></script>
 <script src="./js/Window/DOMLoader.XMLHttp.js" type="text/javascript"></script>
 <script src="./js/Window/DOMLoader.script.js" type="text/javascript"></script>

 <!-- extras -->
 <!-- script src="./build/MIDI.js" type="text/javascript"></script-->
 <script src="./inc/Base64.js" type="text/javascript"></script>
 <script src="./inc/base64binary.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">

window.onload = function () {
	MIDI.loadPlugin({
	  targetFormat: "mp3", 
		soundfontUrl: "./soundfont/",
		instrument:  "accordion",
		callback: function() {
      alert( "midi" );
			MIDI.programChange( 0, 21 );
			var delay = 0; // play one note every quarter second
			var note1 = MIDI.keyToNote["C4"]; // the MIDI note
			var note2 = MIDI.keyToNote["E4"]; // the MIDI note
			var note3 = MIDI.keyToNote["G4"]; // the MIDI note
			var velocity = 127; // how hard the note hits
			// play the note
			MIDI.setVolume(0, 127);
			MIDI.noteOn(0, note1, velocity, delay);		MIDI.noteOff(0, note1, delay + 1);
			MIDI.noteOn(0, note2, velocity, delay+1);		MIDI.noteOff(0, note2, delay + 2);
			MIDI.noteOn(0, note3, velocity, delay+2);		MIDI.noteOff(0, note3, delay + 3);
		}
	});
};

</script>
</body>
</html>